/*! flyer 2017-06-08 */
!function(a){"use strick";var b=function(){this.vision="flyer 0.1"},c=Array.prototype.slice,d=a.location;b.fn=b.prototype={format:function(){var a,b=c.call(arguments),d=b.length;if(d>0){for(var e=1,a=b[0];d>e;e++)a=a.replace(new RegExp("\\{"+e+"\\}","g"),b[e]);return a}return this},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=d.search.substr(1).match(b);return null!=c?unescape(c[2]):null},escapeHTML:function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):a},today:function(){return(new Date).toISOString().replace(/T.+/,"")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},log:function(a,b){var d=c.call(arguments);1===d.length?(b=a,console.log(b)):d.length>1&&console[a](b)}},b.fn.define=function(a,c){b.fn[a]=c},b.fn.extend=function(a){for(var b in a)this[b]=a[b];return this},window.flyer=new b}(window),function(a,b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("该插件需要在支持document的渲染环境上.");if(!b)throw new Error("该插件需要在支持加载了jQuery类库的渲染环境上.");return c(a)}:c(a,b)}("undefined"!=typeof window?window:this,jQuery,function(a,b,c){var d=["flyer-combobox","flyer-combobox-contents","filter-options","fa-angle-down","flyer-combobox-items","flyer-combobox-search","fa-search","selected","open"],e=(document.body,document,location,function(a,b){return this.init(a,b)});e.DEFAULTS={isMulti:!0,disabled:!1,allowSearch:!0,multipleSeparator:";",fieldKey:"id",required:!0,name:"comboBox",fieldValue:"value",placeholder:"placeholder",searchPlaceholder:"在这里可以快捷搜索到你想找的..",url:"",data:[],selectAll:!0,allowSelectAll:!0,fnDataProcessing:function(){this.data=this.data.rows},fnSelected:function(){return!1},fnBeforeSelected:function(){},fnAfterSelected:function(){}},e.prototype={init:function(a,c){this.options=b.extend(!0,{},e.DEFAULTS,c),this.selector=a,this[0]=b(a),this._data={},this.requestData()},template:function(){var a=this.options,b=this,c=['<div class="flyer-combobox">','<div class="flyer-combobox-contents">','<input type="text" class="filter-options" name="'+a.name+'" required="'+a.required+'" placeholder='+a.placeholder+' readonly="readonly" /><i class="fa fa-angle-down"></i>',"</div>",'<div class="flyer-combobox-items">',a.allowSearch?'<div class="flyer-combobox-search"><input placeholder="'+a.searchPlaceholder+'" type="text"><i class="fa fa-search"></i></div>':"","<ul>",a.selectAll?"<li data-index='-1' data-key='-1' data-value='全部'><div>全部</div></li>":"",b.readerItems(),"</ul>","</div>","</div>"];this[0].html(c.join("")),this.$itemContainer=this[0].find("."+d[4]),this.$contents=this[0].find("."+d[1]),this.$items=this.$itemContainer.find("li"),this.$filterOptions=this.$contents.find("."+d[2]).eq(0)},readerItems:function(){for(var a=[],b=this.options,c=b.data,d=0,e=c.length;e>d;d++)a.push("<li data-index="+d+" data-key="+c[d][b.fieldKey]+" data-value="+c[d][b.fieldValue]+"><div>"+c[d][b.fieldValue]+"</div></li>");return a.join("")},requestData:function(){var a=this,c=this.options,d=c.data;0==d.length&&c.url.length>0?b.getJSON(this.options.url,function(b){c.data=b,c.fnDataProcessing(),a.template(),a.initEvents()}):(a.template(),a.initEvents())},initEvents:function(){var a=this,c=a.options;a.$contents.on("click",function(b){a.$itemContainer.hasClass(d[8])?a.hideItems.call(a):a.$itemContainer.addClass(d[8]),a.stop(b)}),a.$items.each(function(){b(this).on("click",function(e){var f=b(this),g=f.hasClass(d[7])?!0:!1,h={fieldKey:f.data("key"),fieldValue:f.data("value")};if("-1"==h.fieldKey&&"全部"==h.fieldValue){if(c.allowSelectAll)return a.selectAllItems(this),!1;a.$items.removeClass(d[7]),a.empty()}a.unselectAll(),a.showSelectedItem(h,g),c.fnSelected.call(a,h,this,a._data),c.isMulti||(a.hideItems.call(a),a.$items.removeClass(d[7])),g?f.removeClass(d[7]):f.addClass(d[7]),a.stop(e)})}),b(document).on("click",function(c){b("."+d[4]).removeClass(d[8]),a.stop(c)})},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},showSelectedItem:function(a,b){var c=this.options,d=this.$filterOptions.data("key")||"",e=this.$filterOptions.val()||"";c.isMulti?b?(d=String(d).replace(a.fieldKey+c.multipleSeparator,""),e=e.replace(a.fieldValue+c.multipleSeparator,"")):(d=String(d)+a.fieldKey+c.multipleSeparator,e=e+a.fieldValue+c.multipleSeparator):(d=a.fieldKey,e=a.fieldValue),this.$filterOptions.val(e),this.$filterOptions.data("key",d),this._data={fieldKey:d,fieldValue:e}},selectAllItems:function(a){var c=this,e=(this.options,b(a));"select"==e.attr("all")?(this.$items.removeClass(d[7]),e.attr("all","unselect"),c.empty()):(this.$items.each(function(){var a=b(this),e={fieldKey:a.data("key"),fieldValue:a.data("value")};a.addClass(d[7]),"-1"!=e.fieldKey&&c.showSelectedItem(e)}),e.attr("all","select"))},unselectAll:function(){var a=this.$itemContainer.find("[data-index='-1']");a.hasClass(d[7])&&(a.removeClass(d[7]),a.attr("all","select"),this.empty())},hideItems:function(){this.$itemContainer.removeClass(d[8])},filterData:function(){},getSelectedData:function(){return this._data},getSelectedValue:function(){return this._data.fieldKey},getSelectedText:function(){return this._data.fieldValue},setValue:function(a){var b=this.$itemContainer.find("[data-key='"+a.fieldKey+"']");this._data={fieldKey:a.fieldKey,fieldValue:a.fieldValue||b.data("value")},this.$filterOptions.val(this._data.fieldValue),this.$filterOptions.data("key",this._data.fieldKey),b.addClass(d[7])},setValues:function(a){for(var b="",c="",e=this.options,f=0,g=a.length;g>f;f++){var h=this.$itemContainer.find("[data-key='"+a[f].fieldKey+"']");b=b+a[f].fieldKey+e.multipleSeparator,c=c+(a[f].fieldValue||h.data("value"))+e.multipleSeparator,h.addClass(d[7])}this._data={fieldKey:b,fieldValue:c},this.$filterOptions.val(this._data.fieldValue),this.$filterOptions.data("key",this._data.fieldKey)},empty:function(){this._data={fieldKey:"",fieldValue:""},this.$filterOptions.val(this._data.fieldValue),this.$filterOptions.data("key",this._data.fieldKey),this.$items.removeClass(d[7])}},b.fn.combobox=function(a){return this.each(function(){return this.ComboBox=new e(this,a),this})},"object"==typeof flyer&&"function"==typeof flyer.define&&flyer.define("combobox",function(a,b){return new e(a,b)})}),flyer.define("ui",function(){var a=this,b=(document.body,document,location,window,{shade:"flyer-shade",shade_loadding:"flyer-shade-loadding",dialog_container:"flyer-dialog-container",dialog_title:"flyer-dialog-title",dialog_move:"flyer-dialog-move",dialog_input:"flyer-dialog-input",dialog_textarea:"flyer-dialog-textarea",flyer_adim:"flyer-anim",flyer_msg:"flyer_msg"}),c={shade:"flyer-shade",shade_loadding:"flyer-shade-loadding",dialog_container:"flyer-dialog-container",dialog_title:"flyer-dialog-title",dialog_move:"flyer-dialog-move",dialog_input:"flyer-dialog-input"},d={index:0,offsetX:0,offsetY:0,isMove:!1,isModal:!0,copies:null,self:null,dialog_type:alert},e={alert:"1",comfirm:"2",msg:"3",prompt:"4",open:"5",tips:"6"},f=a.prototype.ui={shade:function(){return $(document.body).append("<div style='z-index:"+h.getCurrentDate()+"' class='"+b.shade+"' id='"+c.shade+d.index+"'></div>"),setTimeout(function(){$(c.shade+d.index).show()},50),d.index},alert:function(a,b,c){a=a||"",d.dialog_type=e.alert,"function"==typeof b&&(c=b);var h=g.open(a,$.extend({title:"消息",content:"undefined"==typeof a?"":a,buttons:[{text:"确定",click:function(){f.close(h.index),c&&c()}}]},b))},loadding:function(){return d.index++,flyer.shade(),$(document.body).append("<div style='z-index:"+h.getCurrentDate()+"' id='"+c.shade_loadding+d.index+"' class='"+b.shade_loadding+"'><img src='../css/imgs/load.gif'></div>"),setTimeout(function(){$(c.shade_loadding+d.index).show()},10),d.index},closeLoadding:function(a){a="undefined"==typeof a?d.index:a,$("#"+c.shade+a).remove(),$("#"+c.shade_loadding+a).remove(),d.index--},msg:function(a){d.dialog_type=e.msg,options="undefined"==typeof options?{}:options;var b=g.open(a,{isModal:!1,content:a});options.time="undefined"!=typeof options.time?options.time:4e3,options.time>0&&setTimeout(function(){flyer.close(b.index)},options.time)},confirm:function(a,b,h){d.dialog_type=e.comfirm,"function"==typeof b&&(h=b);var i=g.open(a,$.extend({title:"消息",content:"undefined"==typeof a?"":a,buttons:[{text:"确定",click:function(){f.close(i.index),"function"==typeof h&&h(!0,$("#"+c.dialog_input+d.index).val())}},{text:"取消",click:function(){f.close(i.index),"function"==typeof h&&h(!1,$("#"+c.dialog_input+d.index).val())}}]},b))},prompt:function(a,b,h){d.dialog_type=e.prompt,"function"==typeof b&&(h=b);var i=g.open(a,$.extend({title:"消息",content:"undefined"==typeof msg?"":msg,buttons:[{text:"确定",click:function(){var a=$("#"+c.dialog_input+d.index).val();f.close(i.index),"function"==typeof h&&h(!0,a)}},{text:"取消",click:function(){var a=$("#"+c.dialog_input+d.index).val();f.close(i.index),"function"==typeof h&&h(!1,a)}}]},b))},open:function(a){d.dialog_type=e.open;g.open(null,$.extend({title:"子窗体标题",url:null,width:400,height:400},a))},close:function(a){"number"!=typeof a&&"object"==typeof a?a=$(a).attr("_id"):"string"==typeof a&&"object"!=typeof a&&(a=a.replace(/[^\d]+/gi,""));var b=h.byId("flyer-dialog-container"+a);if(b){if(d.dialog_type==e.open)try{var c=$(b).find("iframe").get(0);c.contentWindow.document.write(""),c.contentWindow.close()}catch(f){}document.body.removeChild(b)}b=h.byId("flyer-shade"+a),b&&document.body.removeChild(b)},error:function(a){console&&console.log?console.log(a):alert(a)},browser:function(){var a=function(a){a=a.toLowerCase();var f=b.exec(a)||c.exec(a)||d.exec(a)||a.indexOf("compatible")<0&&e.exec(a)||[];return{browser:f[1]||"",version:f[2]||"0"}},b=/(webkit)\/([\w.]+)/,c=/(opera)(?:.*version)?[ \/]([\w.]+)/,d=/(msie) ([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/,f={},g=window.navigator.userAgent,h=a(g);return h.browser&&(f[h.browser]=!0,f.version=h.version),f}()},g={open:function(a,b){d.index++,d.isModal="undefined"!=typeof b.isModal?b.isModal:!0,d.isModal&&flyer.shade();var c=g.builderContniaer(b);d.dialog_type!=e.msg&&c.appendChild(g.builderTitle(b)),c.appendChild(g.builderBody(b)),d.dialog_type!=e.msg&&c.appendChild(g.builderFooter(b));var f=g.builderSetWin();f.onclick=function(){flyer.close(c)},c.appendChild(f),document.body.appendChild(c);var i=h.getCenterXY(c);return c.style.top=i.y+"px",c.style.left=i.x+"px",d.dialog_type!=e.open||b.isFrame||$("#flyer-dialog-body"+d.index).load(b.url),{elm:c,index:d.index}},builderContniaer:function(a){var f=document.createElement("div");return f.className=b.dialog_container+" "+b.flyer_adim+" "+(d.dialog_type==e.msg?b.flyer_msg:""),f.id=c.dialog_container+d.index,$(f).css("z-index",h.getCurrentDate()),$(f).attr("_id",d.index),"undefined"!=typeof a&&"undefined"!=typeof a.width&&"undefined"!=typeof a.height&&($(f).css("width",a.width),$(f).css("height",a.height)),f},builderTitle:function(a){var e=document.createElement("div");return e.className=b.dialog_title,e.id=c.dialog_title+d.index,$(e).attr("_id",d.index),e.innerHTML=a.title,d.isMove="undefined"!=typeof a.isDarag?a.isDarag:!0,d.isMove&&(e.style.cursor="move"),$(e).mousedown(function(){if(d.isMove="undefined"!=typeof a.isDarag?a.isDarag:!0,d.isMove){var b=g.builderMove(),f=h.byId(c.dialog_container+$(e).attr("_id"));d.copies=b,d.self=f,h.mouseDown(b,f);var i=window.event||arguments.callee.caller.arguments[0];d.offsetX=i.offsetX,d.offsetY=i.offsetY,document.body.appendChild(b),document.body.onselectstart=function(){return!1}}}),$(document).mousemove(function(){d.isMove&&h.mouseOver(d.copies)}),$(document).mouseup(function(){h.mouseOut(d.self),d.isMove=!1,document.body.onselectstart=function(){return!0}}),e},builderButton:function(a){var b=document.createElement("a");return b.className="flyer-button flyer-dialog-btn",b.id="flyer-button"+d.index,b.innerHTML="undefined"!=typeof a?a.text:"Yes",$(b).bind("click",a.click),b},builderFooter:function(a){var b=document.createElement("div");b.className="flyer-dialog-footer",b.id="flyer-dialog-footer"+d.index;for(var c in a.buttons)b.appendChild(g.builderButton(a.buttons[c]));return b},builderBody:function(a){var b=document.createElement("div");switch(b.className="flyer-dialog-body",b.id="flyer-dialog-body"+d.index,d.dialog_type){case e.alert:case e.comfirm:"undefined"!=typeof a.type&&null!=a.type&&a.type.length>0&&(a.content="<i class='flyer-dialog-icon flyer-dialog-icon-"+a.type+"'></i><div class='flyer-dialog-padding'>"+a.content+"</div></div>");break;case e.prompt:a.content=g.builderInput(a).outerHTML;break;case e.open:a.isFrame&&($(b).css("padding","0px"),a.content="<iframe name='flyer_iframe_"+d.index+"' scrolling='auto' frameborder='0' height='"+(a.height-37)+"' width='"+a.width+"' allowtransparency='true' src='"+h.appendFrameUrl(a.url)+"'></iframe>")}return b.innerHTML=a.content,b},builderSetWin:function(){var a=document.createElement("span");return a.className="flyer-dialog-setwin",a.id="flyer-dialog-setwin"+d.index,a.innerHTML='<a class="flyer-dialog-close" href="javascript:void(0)"></a>',a},builderMove:function(){var a=document.createElement("div");return a.className=b.dialog_move,a.id=c.dialog_move+d.index,a},builderInput:function(a){var e="undefined"!=typeof a.type?a.type:"text",f=null;switch(e.toLowerCase()){case"textarea":f=document.createElement("textarea"),f.className=b.dialog_textarea;break;default:f=document.createElement("input"),f.className=b.dialog_input,f.type=e}return f.id=c.dialog_input+d.index,f.maxLength=a.maxLength||999999,f},builderDiv:function(a){var b=document.createElement("div");return b}},h={getCenterXY:function(a){try{var b=document.documentElement||document.body,c=b.offsetWidth||b.clientWidth,d=b.clientHeight||b.clientHeight,e="undefined"!=typeof a?a.offsetWidth:0,f="undefined"!=typeof a?a.offsetHeight:0;return{x:(c-e)/2,y:(d-f)/2,w:b.offsetWidth,h:b.clientHeight}}catch(g){}},byId:function(a){return document.getElementById(a)},mouseOver:function(a){var b,c=window.event||arguments.callee.caller.arguments[0],e=0;e=parseInt(c.clientX)-parseInt(d.offsetX),b=parseInt(c.clientY)-parseInt(d.offsetY)+parseInt(h.getScrollTop()),a&&(a.style.top=b+"px",a.style.left=e+"px")},mouseOut:function(a){var b=h.byId(c.dialog_move+d.index);null!=a&&null!=b&&(a.style.top=parseInt(h.getNumber(b.style.top))-parseInt(h.getScrollTop())+"px",a.style.left=b.style.left,document.body.removeChild(b))},mouseDown:function(a,b){a.style.top=parseInt(h.getNumber(b.style.top))+parseInt(h.getScrollTop())+"px",a.style.left=b.style.left,a.style.width=b.offsetWidth-6+"px",a.style.height=b.offsetHeight-6+"px"},getCurrentDate:function(a){a="undefined"==typeof a?"":a;var b=new Date;return b.getFullYear()+a+(b.getMonth()+1)+a+b.getDate()},appendFrameUrl:function(a){return a+(/[\?]/gi.test(a)?"&":"?")+"v="+Math.random()},getNumber:function(a){return a.toString().replace(/[^\d\.]+/gi,"")},getScrollTop:function(){var a=document.documentElement.scrollTop;return 0==a&&(a=document.body.scrollTop),a}}}),function(a,b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("该插件需要在支持document的渲染环境上.");if(!b)throw new Error("该插件需要在支持加载了jQuery类库的渲染环境上.");return c(a)}:c(a,b)}("undefined"!=typeof window?window:this,jQuery,function(a,b,c){function d(a,b){return this.init(a,b)}d.DEFAULTS={ajax:{URL:null,data:null},data:[],curIndex:1,pageIndex:1,pageSize:5,prevText:"",nextText:"",totalNum:0,pagerLen:5,pageSum:0,isReload:!1,fnBeforeClick:function(){return!1},fnClick:function(){return!1},fnAfterClick:function(){return!1}},d.prototype={init:function(a,b){this.options=this.getOptions(b),this[0]=a,this.render()},render:function(){var a=this,c=a.options;c.ajax;return c.pageSum=Math.ceil(c.totalNum/c.pageSize),c.pageSum<=0?(b(this[0]).empty(),a):(c.pageSum<=c.pagerLen||c.pageSum-c.pagerLen==c.pageIndex?b(this[0]).html(a.simpleTemplate()):b(this[0]).html(a.template()),void a.addEvent())},getOptions:function(a){return b.extend(!0,{},d.DEFAULTS,a)},reload:function(){this.render()},template:function(){var a='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',b=this.options,c=Math.floor((b.pagerLen-2)/2),c=0==c?1:c,d=b.curIndex<b.pagerLen?b.pageIndex:b.curIndex-c,e=b.curIndex<b.pagerLen?b.pagerLen:b.curIndex+c;for(b.curIndex+2*c>b.pageSum-1&&(d=b.pageSum-b.pagerLen,e=b.pageSum),a+='<li class="prev">'+b.prevText+"</li>",b.curIndex>=b.pagerLen&&(a+="<li>"+b.pageIndex+"</li>",a+='<li class="omit">...</li>'),d;e>=d;d++)a+=b.curIndex==d?'<li class="active">'+d+"</li>":"<li>"+d+"</li>";return b.curIndex+2*c<=b.pageSum-1&&(a+='<li class="omit">...</li>',a+="<li>"+b.pageSum+"</li>"),a+='<li class="next">'+b.nextText+"</li>",a+="</ul></div></div>"},simpleTemplate:function(){var a='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',b=this.options,c=b.pageIndex;for(len=b.pageSum,a+='<li class="prev">'+b.prevText+"</li>",c;c<=len;c++)a+=b.curIndex==c?'<li class="active">'+c+"</li>":"<li>"+c+"</li>";return a+='<li class="next">'+b.nextText+"</li>",a+="</ul></div></div>"},addEvent:function(){var a=this,c=a.options,d=b(a[0]).find(".flyer-pager-view").find("li");d.each(function(){var e=b(this);e.hasClass("omit")||e.on("click",function(){if(e.hasClass("next")){if(c.curIndex>=c.pageSum)return this;c.curIndex++}else if(e.hasClass("prev")){if(c.curIndex<=c.pageIndex)return this;c.curIndex--}else c.curIndex=parseInt(e.text());if(c.curIndex<=c.pageSum){if(a.reload(),e.hasClass("next")||e.hasClass("prev")){var b=d.parent().find(".active");d.removeClass("active"),b.next().addClass("active")}else d.removeClass("active"),e.addClass("active");c.fnClick.call(a)}})})}},b.fn.pager=function(a){return this.each(function(){return this.pager=new d(this,a),this})},"object"==typeof flyer&&"function"==typeof flyer.define&&flyer.define("page",function(a,b){return new d(a,b)})});